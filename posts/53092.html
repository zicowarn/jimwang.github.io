
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jim Wang 的个人技术博客">
    <meta name="google-site-verification" content="Vv1-G7f0bcjlHq6prbeTvbDWFc4iN17bGUGM_KcE5xA" />
    <meta name="baidu-site-verification" content="A8086Y6q9Y" />
    <title>Perl 实现CRC-16算法和应用 - Jim Wang 的个人技术博客</title>
    <meta name="author" content="Jim Wang">
    
        <meta name="keywords" content="个人博客,实践,技术,经验,分享,全栈,Technology,blog,Python,Inno Setup,TypeScript,SQLite,AWS,CAM,EDM,JavaScript,CSS,HTML,">
    
    
        <link rel="icon" href="https://zicowarn.github.io/assets/images/favicon.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jim Wang","sameAs":["https://github.com/zicowarn","#wechat","tencent://message/?uin=948509&Site=&Menu=yes","https://www.linkedin.com/in/zhichao-wang-a16662109","mailto:zicowarn@hotmail.com"],"image":"avater.png"},"articleBody":"\n\n作者: Jim Wang 公众号:  巴博萨船长\n代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127#!/usr/bin/eperl -w#   Filename: crc-16.pl my @table;sub generateCRC16()&#123;    # globle @table;    # if (len(@table) == 256) &amp; ($table[1] == 49354))    # &#123;    #     return;    # &#125;    my $i = 0;    my @lst;    my $data;    my $crc;    while ($i &lt; 256) &#123;         # body...         $data = ($i&lt;&lt;1);         $crc = 0;         my $j = 8;         while($j &gt; 0)         &#123;            $data &gt;&gt;=1;            if (($data ^ $crc) &amp; 0x0001)            &#123;                $crc = ($crc &gt;&gt; 1) ^ 0xA001;            &#125;            else            &#123;                 $crc &gt;&gt;= 1;               &#125;            $j -= 1;         &#125;         $lst[$i] = $crc;         $i +=1;     &#125;     return @lst;&#125;@table = generateCRC16();print &quot;-----------------------------------------------\\n&quot;;print &quot;The following is the crc-16 table:\\n&quot;;my $c = 1;for $a (@table)&#123;    printf (&quot;0x%X&quot;,$a);    print &quot;\\t&quot;;    if (($c % 8 == 0) &amp; ($c != 0))    &#123;        print &quot;\\n&quot;;    &#125;    $c += 1;&#125;print &quot;-----------------------------------------------\\n&quot;;sub calculaterCRC()&#123;    my $string = shift(@_);    my $crc = 0xFFFF;    #foreach $chr (unpack(&quot;(a)*&quot;, $string))    foreach $chr (unpack(&quot;C*&quot;, $string))    &#123;        $crc = ($crc &gt;&gt; 8) ^ $table[($crc  ^ $chr) &amp; 0xFF ];    &#125;    my $crcL = sprintf(&quot;\\\\x%X&quot;, &amp;_Lo($crc));    my $crcH = sprintf(&quot;\\\\x%X&quot;, &amp;_Hi($crc));    return $crcH.$crcL;&#125;#printf (&quot;%X\\n&quot;,&amp;calculaterCRC(&quot;Hallo World&quot;));sub convertchrtoacsii()&#123;    my $string = shift(@_);    foreach $chr (unpack(&quot;C0U4&quot;, $string))    &#123;        print $chr.&quot; the acsii code is: &quot;.ord($chr).&quot;  in hex format: &quot;;        printf &quot;%X\\n&quot;, (ord($chr));    &#125;    return;&#125;sub _Lo()&#123;    my $myhex = shift(@_);    return ($myhex &amp; 0x00FF);&#125;sub _Hi()&#123;    my $myhex = shift(@_);    return (($myhex &amp; 0xFF00) &gt;&gt; 8);&#125;sub checkCrc()　＃用于检查ＣＲＣ码时候匹配&#123;    my ($payload, $crcsum) = @_;    print $payload.&quot;---\\n&quot;;    print $crcsum.&quot;+++\\n&quot;;    if ($crcsum eq &amp;calculaterCRC($payload))    &#123;        print &quot;check CRC summe&gt;&gt;: not match!!\\n&quot;;        return 1;    &#125;    else    &#123;        print &quot;check CRC summe&gt;&gt;: match!!\\n&quot;;        return 0;    &#125;&#125;sub embedPayload　＃　此方法主要实现将字符串中的字符转换为十六进制，并加入：作为分隔符&#123;    my $string = shift(@_);    my @chrs = (unpack(&quot;(a)*&quot;, $string));    my @newchrs = map &#123; sprintf(&quot;%X&quot;, (ord($_)))&#125; @chrs;    my $iterms =join (&quot;:&quot;, @newchrs);    return $iterms;&#125;sub extraPayload　＃　上述方法的逆操作&#123;    my $iterms = shift(@_);    my @chrs = split(&quot;:&quot;,$iterms);    my @newchrs = map &#123; chr(hex($_))&#125; @chrs;    my $string =join (&quot;&quot;, @newchrs);    return $string;&#125;print &quot;-----------------------------------------------\\n&quot;;print &amp;embedPayload(&quot;ABCD&quot;).&quot;\\n&quot;;print &quot;---------\\n&quot;;print &amp;extraPayload(&amp;embedPayload(&quot;ABCD&quot;));#print chr(&quot;\\x4F\\x4B&quot;);# usage:# for example # payload of message is &quot;Hallo World&quot;# payload+crc(Hi)+crc(Lo)\n\n先上代码，由于整理博客，代码分析以后整理添加。欢迎交流提意见彼此提高。需要声明一下51cto博客作者zuiwuxin就是作者本人，所以不存在版权问题。以后该博客将作为个人文章的主要发布地。\n\n\n    版权声明：文章首发于  Jim Wang's blog ，\n    转载文章请务必以超链接形式标明文章出处，作者信息及本版权声明。\n","dateCreated":"2015-02-15T14:11:08+01:00","dateModified":"2024-03-13T22:29:45+01:00","datePublished":"2015-02-15T14:11:08+01:00","description":"作者: Jim Wang 公众号:  巴博萨船长\n摘要：本文讨论如何使用Perl语言实现CRC-16算法和应用\nAbstract: This article discusses how to use Perl language to implement CRC-16 algorithm and application","headline":"Perl 实现CRC-16算法和应用","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zicowarn.github.io/posts/53092.html"},"publisher":{"@type":"Organization","name":"Jim Wang","sameAs":["https://github.com/zicowarn","#wechat","tencent://message/?uin=948509&Site=&Menu=yes","https://www.linkedin.com/in/zhichao-wang-a16662109","mailto:zicowarn@hotmail.com"],"image":"avater.png","logo":{"@type":"ImageObject","url":"avater.png"}},"url":"https://zicowarn.github.io/posts/53092.html","keywords":"Perl, CRC-16"}</script>
    <meta name="description" content="作者: Jim Wang 公众号:  巴博萨船长 摘要：本文讨论如何使用Perl语言实现CRC-16算法和应用 Abstract: This article discusses how to use Perl language to implement CRC-16 algorithm and application">
<meta property="og:type" content="blog">
<meta property="og:title" content="Perl 实现CRC-16算法和应用">
<meta property="og:url" content="https://zicowarn.github.io/posts/53092.html">
<meta property="og:site_name" content="Jim Wang 的个人技术博客">
<meta property="og:description" content="作者: Jim Wang 公众号:  巴博萨船长 摘要：本文讨论如何使用Perl语言实现CRC-16算法和应用 Abstract: This article discusses how to use Perl language to implement CRC-16 algorithm and application">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2015-02-15T13:11:08.000Z">
<meta property="article:modified_time" content="2024-03-13T21:29:45.736Z">
<meta property="article:author" content="Jim Wang">
<meta property="article:tag" content="Perl">
<meta property="article:tag" content="CRC-16">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://zicowarn.github.io/assets/images/avater.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-m2dgitnm2byuj37caoszle9u1auenk6va6bk89y4xo0d0wyorkftmkofzpn1.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0411EY69W7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0411EY69W7');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1d51896cc9cd82561c7c8e353bb78c0d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Jim Wang 的个人技术博客
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avater.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avater.png" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Jim Wang</h4>
                <h5 class="sidebar-profile-subtitle"><p>个人技术博客</p>
</h5>
                
                    <h5 class="sidebar-profile-bio"> <hr style='margin: 5px auto; border-top: 1px solid rgba(255,255,255,0.14); width: 20%;'> <span>全栈探索之路<span> <hr style='margin: 8px auto; border-top: 1px solid rgba(255,255,255,0.14); width: 60%;'> 记录个人对技术的理解和开发过程中遇到的问题，欢迎了解更多。 </h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/zicowarn"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#wechat"
                            
                            rel="noopener"
                            title="微信公众号"
                        >
                        <i class="sidebar-button-icon fab fa-weixin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">微信公众号</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="tencent://message/?uin=948509&Site=&Menu=yes"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="QQ"
                        >
                        <i class="sidebar-button-icon fab fa-qq" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">QQ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/zhichao-wang-a16662109"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="领英"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">领英</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:zicowarn@hotmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Perl 实现CRC-16算法和应用
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-02-15T14:11:08+01:00">
	
		    2月 15, 2015
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/Perl-%E7%9B%B8%E5%85%B3-%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/">Perl 相关 - 实战经验</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<p>作者: Jim Wang 公众号:  <a class="main-button-link" href="#wechat" rel="noopener">巴博萨船长</a></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/eperl -w</span></span><br><span class="line"><span class="comment">#   Filename: crc-16.pl </span></span><br><span class="line"><span class="keyword">my</span> @table;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">generateCRC16</span>()</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment"># globle @table;</span></span><br><span class="line">    <span class="comment"># if (len(@table) == 256) &amp; ($table[1] == 49354))</span></span><br><span class="line">    <span class="comment"># &#123;</span></span><br><span class="line">    <span class="comment">#     return;</span></span><br><span class="line">    <span class="comment"># &#125;</span></span><br><span class="line">    <span class="keyword">my</span> $i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">my</span> @lst;</span><br><span class="line">    <span class="keyword">my</span> $data;</span><br><span class="line">    <span class="keyword">my</span> $crc;</span><br><span class="line">    <span class="keyword">while</span> ($i &lt; <span class="number">256</span>) &#123;</span><br><span class="line">         <span class="comment"># body...</span></span><br><span class="line">         $data = ($i&lt;&lt;<span class="number">1</span>);</span><br><span class="line">         $crc = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">my</span> $j = <span class="number">8</span>;</span><br><span class="line">         <span class="keyword">while</span>($j &gt; <span class="number">0</span>)</span><br><span class="line">         &#123;</span><br><span class="line">            $data &gt;&gt;=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (($data ^ $crc) &amp; <span class="number">0x0001</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                $crc = ($crc &gt;&gt; <span class="number">1</span>) ^ <span class="number">0xA001</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                 $crc &gt;&gt;= <span class="number">1</span>;   </span><br><span class="line">            &#125;</span><br><span class="line">            $j -= <span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         $lst[$i] = $crc;</span><br><span class="line">         $i +=<span class="number">1</span>;</span><br><span class="line">     &#125; </span><br><span class="line">    <span class="keyword">return</span> @lst;</span><br><span class="line">&#125;</span><br><span class="line">@table = generateCRC16();</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;-----------------------------------------------\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;The following is the crc-16 table:\n&quot;</span>;</span><br><span class="line"><span class="keyword">my</span> $c = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> $a (@table)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">printf</span> (<span class="string">&quot;0x%X&quot;</span>,$a);</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (($c % <span class="number">8</span> == <span class="number">0</span>) &amp; ($c != <span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $c += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;-----------------------------------------------\n&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">calculaterCRC</span>()</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $string = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">my</span> $crc = <span class="number">0xFFFF</span>;</span><br><span class="line">    <span class="comment">#foreach $chr (unpack(&quot;(a)*&quot;, $string))</span></span><br><span class="line">    <span class="keyword">foreach</span> $chr (<span class="keyword">unpack</span>(<span class="string">&quot;C*&quot;</span>, $string))</span><br><span class="line">    &#123;</span><br><span class="line">        $crc = ($crc &gt;&gt; <span class="number">8</span>) ^ $table[($crc  ^ $chr) &amp; <span class="number">0xFF</span> ];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">my</span> $crcL = <span class="keyword">sprintf</span>(<span class="string">&quot;\\x%X&quot;</span>, &amp;_Lo($crc));</span><br><span class="line">    <span class="keyword">my</span> $crcH = <span class="keyword">sprintf</span>(<span class="string">&quot;\\x%X&quot;</span>, &amp;_Hi($crc));</span><br><span class="line">    <span class="keyword">return</span> $crcH.$crcL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#printf (&quot;%X\n&quot;,&amp;calculaterCRC(&quot;Hallo World&quot;));</span></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">convertchrtoacsii</span>()</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $string = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">foreach</span> $chr (<span class="keyword">unpack</span>(<span class="string">&quot;C0U4&quot;</span>, $string))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">print</span> $chr.<span class="string">&quot; the acsii code is: &quot;</span>.ord($chr).<span class="string">&quot;  in hex format: &quot;</span>;</span><br><span class="line">        <span class="keyword">printf</span> <span class="string">&quot;%X\n&quot;</span>, (<span class="keyword">ord</span>($chr));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> _<span class="title">Lo</span>()</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $myhex = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">return</span> ($myhex &amp; <span class="number">0x00FF</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> _<span class="title">Hi</span>()</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $myhex = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">return</span> (($myhex &amp; <span class="number">0xFF00</span>) &gt;&gt; <span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">checkCrc</span>()　＃用于检查ＣＲＣ码时候匹配</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> ($payload, $crcsum) = @_;</span><br><span class="line">    <span class="keyword">print</span> $payload.<span class="string">&quot;---\n&quot;</span>;</span><br><span class="line">    <span class="keyword">print</span> $crcsum.<span class="string">&quot;+++\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> ($crcsum eq &amp;calculaterCRC($payload))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&quot;check CRC summe&gt;&gt;: not match!!\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&quot;check CRC summe&gt;&gt;: match!!\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">embedPayload</span>　＃　此方法主要实现将字符串中的字符转换为十六进制，并加入：作为分隔符</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $string = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">my</span> @chrs = (<span class="keyword">unpack</span>(<span class="string">&quot;(a)*&quot;</span>, $string));</span><br><span class="line">    <span class="keyword">my</span> @newchrs = <span class="keyword">map</span> &#123; <span class="keyword">sprintf</span>(<span class="string">&quot;%X&quot;</span>, (<span class="keyword">ord</span>($_)))&#125; @chrs;</span><br><span class="line">    <span class="keyword">my</span> $iterms =<span class="keyword">join</span> (<span class="string">&quot;:&quot;</span>, @newchrs);</span><br><span class="line">    <span class="keyword">return</span> $iterms;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">extraPayload</span>　＃　上述方法的逆操作</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $iterms = <span class="keyword">shift</span>(@_);</span><br><span class="line">    <span class="keyword">my</span> @chrs = <span class="keyword">split</span>(<span class="string">&quot;:&quot;</span>,$iterms);</span><br><span class="line">    <span class="keyword">my</span> @newchrs = <span class="keyword">map</span> &#123; <span class="keyword">chr</span>(<span class="keyword">hex</span>($_))&#125; @chrs;</span><br><span class="line">    <span class="keyword">my</span> $string =<span class="keyword">join</span> (<span class="string">&quot;&quot;</span>, @newchrs);</span><br><span class="line">    <span class="keyword">return</span> $string;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;-----------------------------------------------\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> &amp;embedPayload(<span class="string">&quot;ABCD&quot;</span>).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;---------\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> &amp;extraPayload(&amp;embedPayload(<span class="string">&quot;ABCD&quot;</span>));</span><br><span class="line"><span class="comment">#print chr(&quot;\x4F\x4B&quot;);</span></span><br><span class="line"><span class="comment"># usage:</span></span><br><span class="line"><span class="comment"># for example </span></span><br><span class="line"><span class="comment"># payload of message is &quot;Hallo World&quot;</span></span><br><span class="line"><span class="comment"># payload+crc(Hi)+crc(Lo)</span></span><br></pre></td></tr></table></figure>

<p>先上代码，由于整理博客，代码分析以后整理添加。欢迎交流提意见彼此提高。需要声明一下51cto博客作者zuiwuxin就是作者本人，所以不存在版权问题。以后该博客将作为个人文章的主要发布地。</p>
<hr>
<div style="color:#757288;font-size:1.3rem;padding:2px 6px;border:1px solid #fad2d2;background:#ffecea;border-radius:3px;line-height:22px;">
    版权声明：<br>文章首发于 <a target="_blank" rel="noopener" href="http://zhichaowang.online"> Jim Wang's blog </a>，
    转载文章请务必以超链接形式标明文章出处，作者信息及本版权声明。
</div>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/CRC-16/" rel="tag">CRC-16</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Perl/" rel="tag">Perl</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/posts/7109.html"
                    data-tooltip="Python 应用之如何解决加载django模块时的错误:no module named django.conf.urls.defaults"
                    aria-label="上一篇: Python 应用之如何解决加载django模块时的错误:no module named django.conf.urls.defaults"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/posts/21421.html"
                    data-tooltip="Perl 如何创建包与UDP协议的再包装"
                    aria-label="下一篇: Perl 如何创建包与UDP协议的再包装"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zicowarn.github.io/posts/53092.html&amp;title=Perl 实现CRC-16算法和应用"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 Jim Wang. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/posts/7109.html"
                    data-tooltip="Python 应用之如何解决加载django模块时的错误:no module named django.conf.urls.defaults"
                    aria-label="上一篇: Python 应用之如何解决加载django模块时的错误:no module named django.conf.urls.defaults"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/posts/21421.html"
                    data-tooltip="Perl 如何创建包与UDP协议的再包装"
                    aria-label="下一篇: Perl 如何创建包与UDP协议的再包装"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zicowarn.github.io/posts/53092.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zicowarn.github.io/posts/53092.html&amp;title=Perl 实现CRC-16算法和应用"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://zicowarn.github.io/posts/53092.html"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://zicowarn.github.io/posts/53092.html"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://zicowarn.github.io/posts/53092.html"
                        aria-label="分享到 Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>分享到 Google+</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://zicowarn.github.io/posts/53092.html"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=https://zicowarn.github.io/posts/53092.html&amp;title=Perl 实现CRC-16算法和应用"
                        aria-label="分享到 QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avater.png" alt="作者的图片"/>
        
            <h4 id="about-card-name">Jim Wang</h4>
        
            <div id="about-card-bio"> <hr style='margin: 5px auto; border-top: 1px solid rgba(255,255,255,0.14); width: 20%;'> <span>全栈探索之路<span> <hr style='margin: 8px auto; border-top: 1px solid rgba(255,255,255,0.14); width: 60%;'> 记录个人对技术的理解和开发过程中遇到的问题，欢迎了解更多。 </div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>软件工程师</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                河南，中国
            </div>
        
    </div>
</div>

        




    
        
    



    
        
    

<div id="wechat">
    <div id="wechat-card">
        <div id="wechat-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="wechat-qrcode-picture" src="/assets/images/wechat-qrcode.jpg" alt="global.wechat_public_qr_code_image"/>
        
        
            <div id="wechat-qrcode-desc"><p>请扫描上方的二维码订阅我的个人微信公众号</p> <hr style='margin: 8px auto; border-top: 2px solid rgba(1, 1, 1, 0.14); width: 60%;'> <p>原创不易，多多点赞分享支持。</p></div>
        
        
            <img id="wechat-searchbar-picture" src="/assets/images/wechat-search-white.png" alt="global.wechat_public_search_bar_image"/>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/background-cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-2t8c01k1fthzrgprhbm5clfune3ygdtd8ajsnhdxko5pl9jnhax3fioo6uev.min.js"></script>

<!--SCRIPTS END-->


    
      
<script src="/assets/js/mermaid.min.js"></script>

      <script>
          $(document).ready(function() {
              var mermaid_config = {
                  startOnLoad: true,
                  theme: 'default',
                  flowchart:{
                      useMaxWidth: false,
                      htmlLabels: true
                  }                
              }
              mermaid.initialize(mermaid_config);
          });
      </script>
    




    </body>
</html>
